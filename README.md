# Sora 2 Video Generator

Генерация видео через официальный API OpenAI Sora 2 с автоматической загрузкой в облачное хранилище.

## Важно
- Требуется **верифицированная организация** в OpenAI.
- Индивидуальные аккаунты **не имеют доступа**.
- API поддерживает два режима: `sora-2` (быстрая генерация) и `sora-2-pro` (высокое качество).

### Ограничения temp.sh:
- ⚠️ **Файл автоматически удаляется после первого скачивания** — ссылка работает только один раз.
- ⚠️ Файл имеет ограниченный срок хранения (обычно 3 дня, даже без скачивания).
- ⚠️ Рекомендуется скачать файл сразу после получения ссылки.
- ⚠️ Размер файла ограничен возможностями сервиса temp.sh (рекомендуется до 100-500MB).

## Возможности
- Генерация HD-видео по текстовому описанию
- Автоматическая загрузка в облачное хранилище temp.sh
- Автоматическое удаление файла после скачивания

## Установка

```bash
pip install -r requirements.txt
```

## Настройка

Создайте файл `.env` в корне проекта:

```
OPENAI_API_KEY=your_api_key_here
OPENAI_ORG_ID=your_org_id_here
```

## Использование

```python
from sora_2 import generate_sora2_video

result = generate_sora2_video({
    "prompt": "Киберпанк-город ночью, дождь отражается в неоновых вывесках",
    "model": "sora-2",  # опционально
    "openai_api_key": "...",  # опционально (из .env)
    "openai_organization": "..."  # опционально (из .env)
})

print(f"Download link: {result}")
```

## Возврат

Функция возвращает **ссылку для скачивания** (URL) с сервера temp.sh. Файл автоматически удаляется после скачивания.

## Тестирование

Для тестирования загрузки файлов без генерации видео:

```bash
python test_upload.py
```

## Структура проекта

- `sora_2.py` — основная функция генерации видео
- `sora_2.json` — определение функции (JSON schema)
- `call_function.py` — пример использования
- `test_upload.py` — тестирование загрузки файлов

## Примеры вызова в промпте

Функция может быть вызвана через текстовые запросы пользователей. Вот примеры формулировок:

```
"Создай видео киберпанк-города ночью"
"Сгенерируй видео с красивым закатом над океаном"
"Сделай видео летающего робота в космосе"
"Создай видео панды, играющей на скрипке"
"Сгенерируй видео футуристического мегаполиса с летающими машинами"
```

При интеграции с LLM-платформами, функция автоматически будет вызываться при упоминании генерации видео или создании визуального контента.

## Параметры функции для публикации на платформе

Для публикации функции на платформе используйте JSON-схему из файла `sora_2.json`. Вот структура:

```json
{
  "name": "generate_sora2_video",
  "description": "Генерирует видео через официальный OpenAI Sora 2 API и загружает его в облачное хранилище temp.sh, возвращая ссылку для скачивания",
  "parameters": {
    "type": "object",
    "properties": {
      "prompt": {
        "type": "string",
        "description": "Текстовое описание сцены для генерации видео"
      },
      "model": {
        "type": "string",
        "enum": ["sora-2", "sora-2-pro"],
        "description": "Версия модели: sora-2 (быстрая) или sora-2-pro (высокое качество)"
      },
      "openai_api_key": {
        "type": "string",
        "description": "API ключ OpenAI для доступа к Sora 2 (если не указан, берётся из переменной окружения OPENAI_API_KEY)"
      },
      "openai_organization": {
        "type": "string",
        "description": "ID организации OpenAI (если не указан, берётся из переменной окружения OPENAI_ORG_ID)"
      }
    },
    "required": ["prompt"]
  }
}
```

### Параметры:

- **prompt** (обязательный) — текстовое описание сцены для генерации видео
- **model** (опционально) — выбор модели: `"sora-2"` (быстрая генерация) или `"sora-2-pro"` (высокое качество). По умолчанию: `"sora-2"`
- **openai_api_key** (опционально) — API ключ OpenAI. Если не указан, берётся из переменной окружения `OPENAI_API_KEY`
- **openai_organization** (опционально) — ID организации OpenAI. Если не указан, берётся из переменной окружения `OPENAI_ORG_ID`

### Возвращаемое значение:

Функция возвращает строку с URL для скачивания видео с сервера temp.sh. Формат: `"https://temp.sh/xxxxx/file.mp4"`

### Пример ответа:

```json
"https://temp.sh/abc123def456/sora_video_vid_xyz789.mp4"
```
